{"version":3,"sources":["components/steamApi.js","pages/Home/Home.js","components/ErrorBoundary.js","pages/About/About.js","App.js","index.js"],"names":["SteamApi","apiKey","croppingLinks","link","slice","lastIndexOf","this","url","a","_sendRequest","generalInterface","method","version","query","result","console","log","resultRequest","response","steamid","steamID","players","appID","friendslist","fetch","request","ok","Error","status","json","responseInJSON","code","message","steamApiWrapper","React","Component","ResultsList","data","error","map","item","info","personaname","realname","width","height","src","avatarfull","alt","id","ErrorBlock","errorMessage","CompareBlock","loader","LinksProfiles","number","change","value","numb","onChange","e","target","placeholder","Home","profiles","initialState","useState","state","setState","loading","setLoading","setError","setInfo","array","s","res","index","Object","assign","setID","getInfo","clippingsUrls","Promise","all","isNaN","getSteamId","profilesIDs","getPlayerInfo","infoPlayers","getLibraryGames","libraryGames","getFriendListUser","friends","setURL","prevState","newState","useDataApi","watchState","useEffect","onClick","About","App","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.49574c5c.chunk.js","sourcesContent":["class SteamApi {\r\n\tconstructor(apiKey) {\r\n\t\tthis.apiKey = apiKey;\r\n\t}\r\n\r\n\tcroppingLinks = (link) => {\r\n\t\tif (link === '') return;\r\n\t\treturn link.slice(link.lastIndexOf('/') + 1);\r\n\t};\r\n\r\n\tasync getSteamId(url) {\r\n\t\tconst result = await this._sendRequest({\r\n\t\t\tgeneralInterface: 'ISteamUser',\r\n\t\t\tmethod: 'ResolveVanityURL',\r\n\t\t\tversion: 'v0001',\r\n\t\t\tquery: `?key=${this.apiKey}&vanityurl=${url}`,\r\n\t\t});\r\n\t\tconsole.log(result);\r\n\t\treturn result.resultRequest.response.steamid;\r\n\t}\r\n\r\n\tasync getPlayerInfo(steamID) {\r\n\t\tconst result = await this._sendRequest({\r\n\t\t\tgeneralInterface: 'ISteamUser',\r\n\t\t\tmethod: 'GetPlayerSummaries',\r\n\t\t\tversion: 'v0002',\r\n\t\t\tquery: `?key=3F58E57C4B88ADCBCFCD824EFC80FCFB&steamids=${steamID}`,\r\n\t\t});\r\n\t\treturn result.resultRequest.response.players[0];\r\n\t}\r\n\r\n\tasync getFriendListUser(steamid, appID) {\r\n\t\tconst result = await this._sendRequest({\r\n\t\t\tgeneralInterface: 'ISteamUser',\r\n\t\t\tmethod: 'GetFriendList',\r\n\t\t\tversion: 'v0001',\r\n\t\t\tquery: `?key=${this.apiKey}&steamid=${steamid}&relationship=friend`,\r\n\t\t});\r\n\t\t// console.log(result);\r\n\t\treturn result.resultRequest.friendslist;\r\n\t}\r\n\r\n\tasync getLibraryGames(steamid) {\r\n\t\tconst result = await this._sendRequest({\r\n\t\t\tgeneralInterface: 'IPlayerService',\r\n\t\t\tmethod: 'GetOwnedGames',\r\n\t\t\tversion: 'v0001',\r\n\t\t\tquery: `?key=${this.apiKey}&steamid=${steamid}&include_appinfo=true&format=json`,\r\n\t\t});\r\n\r\n\t\treturn result.resultRequest.response;\r\n\t}\r\n\r\n\tasync _sendRequest({ generalInterface, method, version, query }) {\r\n\t\ttry {\r\n\t\t\tconst request = await fetch(\r\n\t\t\t\t`http://api.steampowered.com/${generalInterface}/${method}/${version}/${query}`\r\n\t\t\t);\r\n\t\t\tif (!request.ok) {\r\n\t\t\t\tthrow new Error(`HTTP error! status: ${request.status}`);\r\n\t\t\t}\r\n\t\t\tconst responseInJSON = await request.json();\r\n\t\t\tconst result = await responseInJSON;\r\n\t\t\treturn { resultRequest: result, code: request.status };\r\n\t\t} catch (error) {\r\n\t\t\t// console.log(`STATUS: ${error.status}`);\r\n\t\t\treturn error.message;\r\n\t\t}\r\n\t\t// const responseInJSON = await request.json();\r\n\t\t// const result = await responseInJSON;\r\n\t\t// console.log(result);\r\n\t\t// return result;\r\n\t}\r\n}\r\n\r\nexport default SteamApi;\r\n","import React, { useState, useEffect } from 'react';\r\nimport SteamApi from '../../components/steamApi';\r\nimport { ErrorBoundary } from '../../components/ErrorBoundary';\r\n\r\nconst steamApiWrapper = new SteamApi('3F58E57C4B88ADCBCFCD824EFC80FCFB');\r\n\r\nconst useDataApi = (initialState) => {\r\n\tconst [state, setState] = useState(initialState);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState();\r\n\r\n\tconst setURL = (number, value) => {\r\n\t\tsetState((prevState) => {\r\n\t\t\tconst newState = [...prevState];\r\n\t\t\tnewState[number].url = value;\r\n\t\t\treturn newState;\r\n\t\t});\r\n\t};\r\n\r\n\tconst setInfo = (array) => {\r\n\t\tsetState((s) =>\r\n\t\t\tarray.map((res, index) => ({\r\n\t\t\t\t...s[index],\r\n\t\t\t\tinfo: Object.assign(s[index].info, res),\r\n\t\t\t}))\r\n\t\t);\r\n\t};\r\n\r\n\tconst setID = (array) => {\r\n\t\tsetState((s) =>\r\n\t\t\tarray.map((res, index) => ({ ...s[index], steamid: res }))\r\n\t\t);\r\n\t};\r\n\r\n\tconst getInfo = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst clippingsUrls = state.map((item) =>\r\n\t\t\t\tsteamApiWrapper.croppingLinks(item.url)\r\n\t\t\t);\r\n\t\t\tconst profilesIDs = await Promise.all(\r\n\t\t\t\tclippingsUrls.map((item) =>\r\n\t\t\t\t\tisNaN(item) ? steamApiWrapper.getSteamId(item) : item\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tconst infoPlayers = await Promise.all(\r\n\t\t\t\tprofilesIDs.map((item) => steamApiWrapper.getPlayerInfo(item))\r\n\t\t\t);\r\n\t\t\tconst libraryGames = await Promise.all(\r\n\t\t\t\tprofilesIDs.map((item) => steamApiWrapper.getLibraryGames(item))\r\n\t\t\t);\r\n\t\t\tconst friends = await Promise.all(\r\n\t\t\t\tprofilesIDs.map((item) =>\r\n\t\t\t\t\tsteamApiWrapper.getFriendListUser(item)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tsetError(false);\r\n\t\t\tsetID(profilesIDs);\r\n\t\t\tsetInfo(infoPlayers);\r\n\t\t\tsetInfo(friends);\r\n\t\t\tsetInfo(libraryGames);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`IS ERROR : ${error}`);\r\n\t\t\tsetError(true);\r\n\t\t}\r\n\r\n\t\tsetLoading(false);\r\n\t};\r\n\r\n\treturn {\r\n\t\tstate,\r\n\t\tsetState,\r\n\t\tsetURL,\r\n\t\tgetInfo,\r\n\t\tloading,\r\n\t\tsetLoading,\r\n\t\terror,\r\n\t};\r\n};\r\n\r\nconst ResultsList = ({ data, error }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<br></br>\r\n\t\t\t<ul>\r\n\t\t\t\t{!error &&\r\n\t\t\t\t\tdata.map((item) => (\r\n\t\t\t\t\t\t<li key={item.id}>\r\n\t\t\t\t\t\t\tSteam url: {item.url}\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\tSteamid: {item.steamid}\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\tUsername: {item.info.personaname}\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\tReal name: {item.info.realname}\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\tGames count: {item.info['game_count']}\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\twidth='115px'\r\n\t\t\t\t\t\t\t\theight='115px'\r\n\t\t\t\t\t\t\t\tsrc={item.info.avatarfull}\r\n\t\t\t\t\t\t\t\talt='avatar'\r\n\t\t\t\t\t\t\t></img>\r\n\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))}\r\n\t\t\t\t{error && <ErrorBlock />}\r\n\t\t\t</ul>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst ErrorBlock = ({ errorMessage }) => {\r\n\tconsole.log(errorMessage);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<p>Ooops... Something went wrong. Please, try again.</p>\r\n\t\t\t{errorMessage}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst CompareBlock = ({ data, loader, error }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<br></br>\r\n\t\t\t{loader ? 'Loading...' : <ResultsList data={data} error={error} />}\r\n\t\t\t{/* {error && <ErrorBlock />} */}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst LinksProfiles = ({ number, url, change }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<input\r\n\t\t\t\tvalue={url}\r\n\t\t\t\tnumb={number}\r\n\t\t\t\tonChange={(e) => change(number, e.target.value)}\r\n\t\t\t\tplaceholder='Enter your url steam profile'\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction Home() {\r\n\tconst usersProfiles = [\r\n\t\t{ url: '', steamid: '', id: 1, info: {} },\r\n\t\t{ url: '', steamid: '', id: 2, info: {} },\r\n\t];\r\n\tconst profiles = useDataApi(usersProfiles);\r\n\tconst watchState = profiles.state.map((item) => item);\r\n\tconst [httpStatusCode, sethttpStatusCode] = useState();\r\n\r\n\tuseEffect(() => {\r\n\t\t// watchState.map((item) =>\r\n\t\t// \titem ? setIsLoaded(true) : setIsLoaded(false)\r\n\t\t// );\r\n\t\t// watchState.forEach(function callback(item, code) {\r\n\t\t// \tsethttpStatusCode(code);\r\n\t\t// });\r\n\t}, [watchState]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Home page</h1>\r\n\t\t\t<LinksProfiles\r\n\t\t\t\tnumber={0}\r\n\t\t\t\turl={profiles.state[0].url}\r\n\t\t\t\tchange={profiles.setURL}\r\n\t\t\t/>\r\n\t\t\t<LinksProfiles\r\n\t\t\t\tnumber={1}\r\n\t\t\t\turl={profiles.state[1].url}\r\n\t\t\t\tchange={profiles.setURL}\r\n\t\t\t/>\r\n\t\t\t<button onClick={() => profiles.getInfo()}>Get</button>\r\n\t\t\t<CompareBlock\r\n\t\t\t\tdata={profiles.state}\r\n\t\t\t\tloader={profiles.loading}\r\n\t\t\t\terror={profiles.error}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nexport class ErrorBoundary extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { error: false, errorInfo: null };\r\n\t}\r\n\r\n\tstatic getDerivedStateFromError(error) {\r\n\t\treturn { error: true };\r\n\t}\r\n\r\n\tcomponentDidCatch(error, errorInfo) {\r\n\t\tthis.setState({\r\n\t\t\terror: error,\r\n\t\t\terrorInfo: errorInfo,\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.error) {\r\n\t\t\treturn <h1>Что-то пошло не так.</h1>;\r\n\t\t}\r\n\r\n\t\treturn this.props.children;\r\n\t}\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nfunction About() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>About page</h1>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default About;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n\tBrowserRouter as Router,\r\n\tSwitch,\r\n\tNavLink,\r\n\tLink,\r\n\tRoute,\r\n\tuseRouteMatch,\r\n\tuseParams,\r\n} from 'react-router-dom';\r\nimport Home from './pages/Home/Home.js';\r\nimport About from './pages/About/About.js';\r\n\r\nexport default function App() {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route path='/about' component={About} />\r\n\t\t\t\t\t<Route path='/' component={Home} />\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<BrowserRouter>\r\n\t\t<App />\r\n\t</BrowserRouter>,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}